<p class="text-2xl font-bold text-center my-4">Todos Page</p>

<!-- Search and Add Todo Section -->
<div class="flex flex-col md:flex-row md:justify-between items-center px-4 md:px-6 mb-10 gap-4 md:gap-6 w-full">

  <!-- Search Input -->
  <div class="relative w-full md:w-1/2">
    <input
      type="text" [(ngModel)]="searchQuery"
      class="w-full p-3 pl-10 border border-gray-300 rounded-full bg-white shadow-md focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition duration-300 outline-none"
      placeholder="üîç Search todos..." />

    <!-- Search Icon -->
    <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0z" />
    </svg>
  </div>

  <!-- Buttons Container -->
  <div class="flex flex-col md:flex-row gap-3 md:gap-4 w-full md:w-auto">

    <!-- Add Todo Button -->
    <button class="px-6 py-3 text-white font-semibold bg-gradient-to-r from-green-500 to-green-700 rounded-full shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl active:scale-95 w-full md:w-auto"
            (click)="openModal()">
      + Add Todo
    </button>

    <!-- Toggle View Button -->
    <button class="px-6 py-3 font-semibold text-gray-100 bg-gray-800 rounded-full shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl active:scale-95 w-full md:w-auto"
            (click)="toggleView()">
      <span class="flex items-center justify-center gap-2">
        <svg *ngIf="isListView" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        <svg *ngIf="!isListView" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h6v6H3V3zm12 0h6v6h-6V3zM3 15h6v6H3v-6zm12 0h6v6h-6v-6z"></path>
        </svg>
        {{ isListView ? 'Grid View' : 'List View' }}
      </span>
    </button>

  </div>
</div>

<!-- Modal -->
<div
  *ngIf="isModalOpen"
  class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm z-50">
  <div
    class="bg-white p-6 rounded-lg shadow-2xl w-96 relative transition-transform transform scale-100">
    <!-- Close Button -->
    <button class="absolute top-3 right-3 text-gray-500 hover:text-red-500" (click)="closeModal()">
      ‚úï
    </button>

    <!-- Modal Header -->
    <h2 class="text-xl font-bold text-center text-gray-800">Add New Todo</h2>

    <!-- Input Field -->
    <input
      type="text" [(ngModel)]="newTodoNote"
      class="w-full p-3 mt-4 border border-gray-300 rounded-lg focus:ring focus:ring-blue-500 outline-none"
      placeholder="Enter todo note (Press Enter to save)"
      (keyup.enter)="addTodo()"
    />

    <!-- Action Buttons -->
    <div class="flex justify-end mt-4 gap-3">
      <button class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600" (click)="closeModal()">Cancel</button>
      <button
        class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
        (click)="addTodo()"
        [disabled]="!newTodoNote.trim()"
      >
        Add
      </button>
    </div>
  </div>
</div>

<!-- Todo Display -->
<div [ngClass]="{
  'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 p-6': !isListView,
  'p-6 space-y-4': isListView
}">

  <div *ngFor="let todo of filteredTodos"
       class="relative p-6 rounded-xl shadow-lg transition-all duration-300 bg-white/70 backdrop-blur-lg border border-gray-200 cursor-pointer group"
       [ngClass]="{
         'bg-green-100/60 border-green-400': todo.isCompleted,
         'bg-white/70 border-gray-300': !todo.isCompleted,
         'hover:scale-105 hover:shadow-2xl hover:border-blue-400': !isListView
       }">

    <!-- Status Ribbon -->
    <div class="absolute -top-3 -left-3 bg-green-500 text-white text-xs font-semibold px-3 py-1 rounded-lg shadow-md"
         *ngIf="todo.isCompleted"><!--‚úî-->
      Done
    </div>

    <div class="absolute -top-3 -left-3 bg-red-500 text-white text-xs font-semibold px-3 py-1 rounded-lg shadow-md"
         *ngIf="!todo.isCompleted"><!--‚ùå-->
      Pending
    </div>

    <!-- Todo Text -->
    <p class="text-lg font-semibold text-gray-800">{{ todo.note }}</p>
    <p class="text-xs text-gray-500 mt-1">üïí Created: {{ todo.createdDate }} at {{ todo.createdTime }}</p>

    <!-- Status Message
    <p class="mt-2 text-sm font-medium transition-all duration-300"
       [ngClass]="{ 'text-green-600': todo.isCompleted, 'text-red-500': !todo.isCompleted }">
      {{ todo.isCompleted ? '‚úî Completed' : '‚ùå Not Completed' }}
    </p>-->

    <!-- Action Buttons -->
    <div class="flex justify-center gap-4 mt-4">
      <button class="p-3 rounded-full bg-gray-200 hover:bg-gray-300 shadow transition-all duration-300 active:scale-90"
              (click)="todo.isCompleted ? unCompleteTodo(todo.id) : completeTodo(todo.id)">
        <span class="text-xl text-gray-800">{{ todo.isCompleted ? '‚Ü©' : '‚úî' }}</span>
      </button>

      <button class="p-3 rounded-full bg-gray-200 text-white hover:bg-red-100 shadow-md transition-all duration-300 active:scale-90"
              (click)="deleteTodo(todo.id)">
        <span class="text-xl">‚ùå</span>
      </button>
    </div>

  </div>
</div>
